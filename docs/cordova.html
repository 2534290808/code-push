<!DOCTYPE html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><link href=http://gmpg.org/xfn/11 rel=profile><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta http-equiv=content-type content="text/html; charset=utf-8"><meta property=og:title content="CodePush"><meta property=og:site_name content="CodePush"><meta property=og:description content="CodePush is a service that allows you to push live mobile app updates directly to your end users' devices."><meta property=og:image content="https://microsoft.github.io/code-push/assets/images/fbshare.PNG"><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@Microsoft><meta name=twitter:title content=CodePush><meta name=twitter:description content="CodePush is a service that allows you to push live mobile app updates directly to your end users' devices."><meta name=twitter:image content=https://microsoft.github.io/code-push/assets/images/fbshare.PNG><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=viewport content="user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1,width=device-width"><meta name=description content="CodePush is a service that allows you to push live mobile app updates directly to your end users' devices."><title>Cordova Client SDK &middot; CodePush</title><link rel=stylesheet href=/code-push/assets/css/vendor.a6bad8f4.css><link rel=stylesheet href=/code-push/assets/css/style.min.089db944.css><link rel=apple-touch-icon sizes=57x57 href=/code-push/assets/images/icons/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/code-push/assets/images/icons/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/code-push/assets/images/icons/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/code-push/assets/images/icons/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/code-push/assets/images/icons/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/code-push/assets/images/icons/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/code-push/assets/images/icons/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/code-push/assets/images/icons/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/code-push/assets/images/icons/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/code-push/assets/images/icons/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/code-push/assets/images/icons/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/code-push/assets/images/icons/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/code-push/assets/images/icons/favicon-16x16.png><link rel=manifest href=/code-push/assets/images/icons/manifest.json><meta name=msapplication-TileColor content=#294E80><meta name=msapplication-TileImage content=/code-push/assets/images/icons/ms-icon-144x144.png><meta name=theme-color content=#ffffff><script src=/code-push/assets/js/vendors.89d36c54.js></script><script src=/code-push/assets/js/all.min.7a3e5068.js></script><link rel=alternate type=application/rss+xml title=RSS href=/code-push/atom.xml></head><body><header role=banner><nav class="navbar navbar-default navbar-fixed-top"><div class=container-fluid><div class=navbar-header><button type=button class="navbar-toggle pull-left collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=/code-push/index.html><img class=navbar-logo src="/code-push/assets/images/codepush_navbar_logo.svg"></a></div><div class="collapse navbar-collapse navbar_center" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li class=""><a href=/code-push/index.html#getting_started>Get Started</a></li><li class=active><a href=/code-push/docs/index.html>Documentation</a></li><li class=""><a href=/code-push/faq/index.html>FAQ</a></li></ul></div></div></nav></header><div class=top_navbar_spacer></div><div class=docs><div id=content class="container main_content"><div class="col-md-3 toc-container hidden-sm hidden-xs"><div class=row><div class=site-toc-container><h2 class=site-toc-title>Table of Contents</h2><ul class=site-toc><li><a class="" href=/code-push/docs/getting-started.html>Getting Started</a></li><li><a class="" href=/code-push/docs/cli.html>Management CLI</a></li><li><a class=this-page href=/code-push/docs/cordova.html>Cordova Client SDK</a><div id=page-toc class=page-toc></div></li><li><a class="" href=/code-push/docs/react-native.html>React Native Client SDK</a></li></ul></div></div></div><div class="col-md-7 col-md-offset-1"><div class=row><div class="xs-toc-container visible-sm visible-xs"><nav class=xs-toc><div class="toc-dropdown dropdown"><h2 class=site-toc-title>Table of Contents</h2><a class="dropdown-toggle btn" data-toggle=dropdown href=#>Select topic <span class=caret></span></a><ul class=dropdown-menu><li><a href=/code-push/docs/getting-started.html>Getting Started</a></li><li><a href=/code-push/docs/cli.html>Management CLI</a></li><li><a href=/code-push/docs/cordova.html>Cordova Client SDK</a></li><li><a href=/code-push/docs/react-native.html>React Native Client SDK</a></li></ul></div></nav></div></div><div class=row><header class=doc-header><h1 class=doc-title>Cordova Client SDK</h1></header><article class=doc-content><p>This plugin provides integration with the CodePush service, allowing you to easily update the www contents of your Cordova applications. The plugin exposes the CodePush API via the <code>window.codePush</code> object, which is available after the <code>deviceready</code> event has fired.</p><h2>Installation</h2><div class=highlight><pre><code class=language-text data-lang=text>cordova plugin add cordova-plugin-code-push
</code></pre></div><h2>Supported platforms</h2><ul><li>Android</li><li>iOS</li></ul><h2>How does it work?</h2><p>A Cordova application&rsquo;s assets (HTML, JavaScript, CSS files and other resources) are traditionally loaded from the application installation location on the target device. After you submit an update to the store, the user downloads the update, and those assets will be replaced with the new assets.</p><p>CodePush is here to simplify this process by allowing you to instantly update your application&rsquo;s assets without having to submit a new update to the store. We do this by packaging the application assets in a zip archive and sending it to the CodePush server. In the application, we install and persist the update. Then, since these are all web assets, the application will just reload from the updated package location. We store the update packages in the internal storage of the device.</p><p>For an easy way to get started, please see our <a href=https://github.com/Microsoft/cordova-plugin-code-push/tree/master/sample>sample application</a> and our <a href=#getting-started>getting started guide</a>.</p><h2>Getting started</h2><ol><li>Install the plugin by running <code>cordova plugin add cordova-plugin-code-push</code></li><li>Create deployments per target platform using the <a href=https://github.com/Microsoft/code-push/tree/master/cli>CodePush CLI</a></li><li><p>Add the deployment keys to your <code>config.xml</code></p><div class=highlight><pre><code class=language-xml data-lang=xml>&lt;platform name=&quot;android&quot;&gt;
    &lt;preference name=&quot;CodePushDeploymentKey&quot; value=&quot;YOUR-ANDROID-DEPLOYMENT-KEY&quot; /&gt;
&lt;/platform&gt;
&lt;platform name=&quot;ios&quot;&gt;
    &lt;preference name=&quot;CodePushDeploymentKey&quot; value=&quot;YOUR-IOS-DEPLOYMENT-KEY&quot; /&gt;
&lt;/platform&gt;
</code></pre></div></li><li><p>Allow access to the CodePush server:</p></li></ol><ul><li><p>In <code>config.xml</code>, add</p><div class=highlight><pre><code class=language-xml data-lang=xml>&lt;access origin=&quot;https://codepush.azurewebsites.net/ &quot; /&gt;
</code></pre></div></li><li><p>In your html pages where the plugin is used, add the server URL to your existing Content Security Policy (CSP) header:</p><div class=highlight><pre><code class=language-xml data-lang=xml>&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src https://codepush.azurewebsites.net/ 'self' ... &quot;&gt;
</code></pre></div></li></ul><ol><li>You are now ready to use the plugin in the application code. See the sample app for an example and the methods description for more details.</li></ol><h2>Create an application update package</h2><p>You can create an update by simply zipping and deploying your platform&rsquo;s www folder. The <a href=https://github.com/Microsoft/code-push/tree/master/cli>CodePush CLI</a> has a <code>deploy</code> command for this.</p><ol><li><p>Build your application</p><p><code>cordova build</code></p></li><li><p>Deploy update using the <a href=https://github.com/Microsoft/code-push/tree/master/cli>CodePush CLI</a></p></li></ol><ul><li>For Android:</li></ul><div class=highlight><pre><code class=language-text data-lang=text>  code-push deploy &lt;appName&gt; path_to_your_app/platforms/android/assets/www &lt;minAppVersion&gt; --deploymentName &lt;AndroidDeploymentName&gt;
</code></pre></div><ul><li>For iOS:</li></ul><div class=highlight><pre><code class=language-text data-lang=text>  code-push deploy &lt;appName&gt; path_to_your_app/platforms/ios/www &lt;minAppVersion&gt; --deploymentName &lt;iOSDeploymentName&gt;
</code></pre></div><p>The service should now return an update when calling <code>codePush.checkForUpdate</code>.</p><h2>LocalPackage</h2><p>Contains details about an update package that has been downloaded locally or already applied (currently installed package).</p><h3>Properties</h3><ul><li><strong>deploymentKey</strong>: Deployment key of the package. (String)</li><li><strong>description</strong>: Package description. (String)</li><li><strong>label</strong>: Package label. (String)</li><li><strong>appVersion</strong>: The native version of the application this package update is intended for. (String)</li><li><strong>isMandatory</strong>: Flag indicating if the update is mandatory. (Boolean)</li><li><strong>packageHash</strong>: The hash value of the package. (String)</li><li><strong>packageSize</strong>: The size of the package, in bytes. (Number)</li><li><strong>failedApply</strong>: Boolean flag indicating if this update package was previously attempted and the update failed. (Boolean). If using the rollback feature, this field can protect against going into an infinite bad update/revert loop. For an example on how to use the rollbackTimeout parameter to protect against a bad update, see the <a href=#codepushnotifyapplicationready>notifyApplicationReady() documentation</a>.</li><li><strong>localPath</strong>: The current, local path of the package. (String)</li><li><strong>isFirstRun</strong>: Flag indicating if the current application run is the first one after the package was applied. (Boolean)</li></ul><h3>Methods</h3><ul><li><strong>apply(applySuccess, applyError, rollbackTimeout)</strong>: Applies this package to the application. The application will be reloaded with this package and on every application launch this package will be loaded. If the rollbackTimeout parameter is provided, the application will wait for a <code>codePush.notifyApplicationReady()</code> for the given number of milliseconds. If <code>codePush.notifyApplicationReady()</code> is called before the time period specified by <code>rollbackTimeout</code>, the apply operation is considered a success. Otherwise, the apply operation will be marked as failed, and the application is reverted to its previous version.</li></ul><h4>Example</h4><div class=highlight><pre><code class=language-javascript data-lang=javascript>var onError = function (error) {
    console.log(&quot;An error occurred. &quot; + error);
};

var onApplySuccess = function () {
    console.log(&quot;Apply succeeded. Reloading the application...&quot;);
};

var onPackageDownloaded = function (localPackage) {
    localPackage.apply(onApplySuccess, onError);
};

var onUpdateCheck = function (remotePackage) {
    if (!remotePackage) {
        console.log(&quot;The application is up to date.&quot;);
    } else {
        console.log(&quot;A CodePush update is available. Package hash: &quot; + remotePackage.packageHash);
        remotePackage.download(onPackageDownloaded, onError);
    }
};

window.codePush.checkForUpdate(onUpdateCheck, onError);
</code></pre></div><p>For an example on how to use the rollbackTimeout parameter to protect against a bad update, see the <a href=#codepushnotifyapplicationready>notifyApplicationReady() documentation</a>.</p><h2>RemotePackage</h2><p>Contains details about an update package that is available for download.</p><h3>Properties</h3><ul><li><strong>deploymentKey</strong>: Deployment key of the package. (String)</li><li><strong>description</strong>: Package description. (String)</li><li><strong>label</strong>: Package label. (String)</li><li><strong>appVersion</strong>: The native version of the application this package update is intended for. (String)</li><li><strong>isMandatory</strong>: Flag indicating if the update is mandatory. (Boolean)</li><li><strong>packageHash</strong>: The hash value of the package. (String)</li><li><strong>packageSize</strong>: The size of the package, in bytes. (Number)</li><li><strong>failedApply</strong>: Boolean flag indicating if this update package was previously attempted and the update failed. (Boolean)</li><li><strong>downloadUrl</strong>: The URL at which the package is available for download. (String)</li></ul><h3>Methods</h3><ul><li><strong>download(downloadSuccess, downloadError)</strong>: Downloads the package update from the CodePush service. The <code>downloadSuccess</code> callback is invoked with a <code>LocalPackage</code> argument, representing the downloaded package.</li></ul><h3>Example</h3><div class=highlight><pre><code class=language-javascript data-lang=javascript>var onError = function (error) {
    console.log(&quot;An error occurred. &quot; + error);
};

var onPackageDownloaded = function (localPackage) {
    console.log(&quot;Package downloaded at: &quot; + localPackage.localPath);
    // you can now update your application to the downloaded version by calling localPackage.apply()
};

var onUpdateCheck = function (remotePackage) {
    if (!remotePackage) {
        console.log(&quot;The application is up to date.&quot;);
    } else {
        console.log(&quot;A CodePush update is available. Package hash: &quot; + remotePackage.packageHash);
        remotePackage.download(onPackageDownloaded, onError);
    }
};

window.codePush.checkForUpdate(onUpdateCheck, onError);
</code></pre></div><ul><li><strong>abortDownload(abortSuccess, abortError)</strong>: Aborts the current download session, if any.</li></ul><h2>codePush.checkForUpdate</h2><p>Queries the CodePush server for updates. <code>javascript codePush.checkForUpdate(onUpdateCheck, onError);</code> - <strong>onUpdateCheck</strong> Callback invoked in case of a successful response from the server. The callback takes one <code>RemotePackage</code> parameter. A non-null package is a valid update. A null package means the application is up to date. - <strong>onError</strong> Optional callback invoked in case of an error. The callback takes one error parameter, containing the details of the error.</p><h3>Example</h3><div class=highlight><pre><code class=language-javascript data-lang=javascript>var onError = function (error) {
    console.log(&quot;An error occurred. &quot; + error);
};

var onUpdateCheck = function (remotePackage) {
    if (!remotePackage) {
        console.log(&quot;The application is up to date.&quot;);
    } else {
        console.log(&quot;A CodePush update is available. Package hash: &quot; + remotePackage.packageHash);
    }
};

window.codePush.checkForUpdate(onUpdateCheck, onError);
</code></pre></div><h2>codePush.getCurrentPackage</h2><div class=highlight><pre><code class=language-javascript data-lang=javascript>codePush.getCurrentPackage(onPackageSuccess, onError);
</code></pre></div><p>Get the currently installed package information. - <strong>onPackageSuccess</strong>: Callback invoked with the currently deployed package information. If the application did not install updates yet, <code>packageSuccess</code> will be called with a <code>null</code> argument. - <strong>onError</strong>: Optional callback invoked in case of an error.</p><h3>Example</h3><div class=highlight><pre><code class=language-javascript data-lang=javascript>var onError = function (error) {
    console.log(&quot;An error occurred. &quot; + error);
};

var onPackageSuccess = function (localPackage) {
    if (!localPackage) {
        console.log(&quot;The application has no CodePush updates installed (App Store Version).&quot;);
    } else {
        console.log(&quot;The currently installed CodePush update: &quot; + localPackage.packageHash);
    }
};

window.codePush.getCurrentPackage(onPackageSuccess, onError);
</code></pre></div><h2>codePush.notifyApplicationReady</h2><div class=highlight><pre><code class=language-javascript data-lang=javascript>codePush.notifyApplicationReady(notifySucceeded, notifyFailed);
</code></pre></div><p>Notifies the plugin that the update operation succeeded. Calling this function is required if a rollbackTimeout parameter is passed to your <code>LocalPackage.apply</code> call. If automatic rollback was not used, calling this function is not required and will result in a noop. - <strong>notifySucceeded</strong>: Optional callback invoked if the plugin was successfully notified. - <strong>notifyFailed</strong>: Optional callback invoked in case of an error during notifying the plugin.</p><h3>Example</h3><div class=highlight><pre><code class=language-javascript data-lang=javascript>// App version 1 (current version)

var onError = function (error) {
    console.log(&quot;An error occurred. &quot; + error);
};

var onApplySuccess = function () {
    console.log(&quot;Apply succeeded. Reloading the application...&quot;);
};

var onPackageDownloaded = function (localPackage) {
    // set the rollbackTimeout to 10s
    localPackage.apply(onApplySuccess, onError, 10000);
};

var onUpdateCheck = function (remotePackage) {
    if (!remotePackage) {
        console.log(&quot;The application is up to date.&quot;);
    } else {
        // The hash of each previously reverted package is stored for later use. 
        // This way, we avoid going into an infinite bad update/revert loop.
        if (!remotePackage.failedApply) {
            console.log(&quot;A CodePush update is available. Package hash: &quot; + remotePackage.packageHash);
            remotePackage.download(onPackageDownloaded, onError);
        } else {
            console.log(&quot;The available update was attempted before and failed.&quot;);
        }
    }
};

window.codePush.checkForUpdate(onUpdateCheck, onError);

//------------------------------------------------

// App version 2 (updated version)

var app = {
    onDeviceReady: function () {
        // If this call is not made in 10s after the updated versio of the application is loaded,
        // the application will be reverted to the previous version
        window.codePush.notifyApplicationReady();
        // ...
    }
}
</code></pre></div></article></div></div></div></div><footer><div class=footer-container><div class=container id=footer><div class=row><div class=col-sm-9><div class=row><div class=col-sm-4><h4>General</h4><ul class=nav><li><a href=https://github.com/Microsoft/code-push/blob/master/LICENSE.md target=_blank>License</a></li><li><a href=https://www.visualstudio.com/en-us/privacy-policy-vs target=_blank>Privacy</a></li><li><a href=https://msdn.microsoft.com/en-us/cc300389 target=_blank>Terms of Service</a></li></ul></div><div class=col-sm-4><h4>Community</h4><ul class=nav><li><a href="https://github.com/Microsoft/code-push/" target=_blank>GitHub Project</a></li><li><a href=https://stackoverflow.com/questions/tagged/codepush target=_blank>Stack Overflow</a></li><li><a href=https://twitter.com/hashtag/codepush target=_blank>#CodePush</a></li></ul></div><div class=col-sm-4><h4>Documentation</h4><ul class=nav><li><a href=https://github.com/Microsoft/code-push/blob/master/cli/README.md target=_blank>CLI Docs</a></li><li><a href=https://github.com/Microsoft/cordova-plugin-code-push/blob/master/README.md target=_blank>Cordova Plugin Docs</a></li><li><a href=https://github.com/Microsoft/react-native-code-push/blob/master/README.md target=_blank>React Native Plugin Docs</a></li></ul></div></div></div><div class=col-sm-3><h3><i class="fa fa-comment"></i> Talk to us!</h3><p>If you have any feedback or suggestions on how we can make CodePush more awesome, please <a href=mailto:codepushfeed@microsoft.com>email us</a> or ping us in the <a href=https://discordapp.com/channels/102860784329052160/107883037156466688>#code-push</a> channel on Reactiflux (for React Native).</p></div></div></div></div><div class="container-fluid signature-container"><div class=container><div class="row signature"><p class="pull-left hidden-xs">Made with <span class="glyphicon glyphicon-heart"></span> in Redmond</p><div class=pull-right><p class="copyright pull-left">&copy;2012-2015 Microsoft <img class=ms-logo-footer src="/code-push/assets/images/Microsoft_logo.svg"></p></div></div></div></div></footer><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-68566566-1', 'auto');
    
     // strip off trailing slashes
    var pathnameWithoutTrailingSlash = window.location.pathname.toLowerCase();
    var pathnameLength = pathnameWithoutTrailingSlash.length;
    
    if (pathnameLength > 1 && pathnameWithoutTrailingSlash.lastIndexOf("/") == pathnameLength - 1) {
        pathnameWithoutTrailingSlash = pathnameWithoutTrailingSlash.substring(0, pathnameLength - 1);
    }
    ga("send", "pageview", pathnameWithoutTrailingSlash);
    
    window.onhashchange = function () {
        ga("send", "pageview", window.location.pathname.toLowerCase() + window.location.hash);
    };</script></body></html>