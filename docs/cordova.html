<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta property="og:title" content="CodePush" />
  <meta property="og:site_name" content="CodePush"/>
  <meta property="og:description" content="CodePush Blog" />
  <meta property="og:image" content="https://microsoft.github.io/code-push/assets/images/fbshare.PNG" />
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@Microsoft">
  <meta name="twitter:title" content="CodePush">
  <meta name="twitter:description" content="CodePush Blog">
  <meta name="twitter:image" content="https://microsoft.github.io/code-push/assets/images/fbshare.PNG">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
  <meta name="description" content="CodePush Blog">

  <title>
    
      Cordova Client SDK &middot; CodePush
    
  </title>
  
  <!-- build:css  /assets/css/vendor.css -->
  <link rel="stylesheet" href="/code-push/libraries/bootstrap/dist/css/bootstrap.css" />
  <link rel="stylesheet" href="/code-push/libraries/highlightjs/styles/solarized_light.css">
  <link rel="stylesheet" href="/code-push/libraries/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/code-push/libraries/github-fork-ribbon-css/gh-fork-ribbon.css">
  <!-- endbuild -->
  
  <!-- CSS -->
  <!-- build:css /assets/css/style.min.css -->
  <link rel="stylesheet" href="/code-push/assets/stylesheets/style.css">
  <!-- endbuild -->             

  <!-- Icons --> <!-- TODO: Check that these all wok -->
  <link rel="apple-touch-icon" sizes="57x57" href="/code-push/assets/images/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/code-push/assets/images/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/code-push/assets/images/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/code-push/assets/images/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/code-push/assets/images/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/code-push/assets/images/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/code-push/assets/images/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/code-push/assets/images/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/code-push/assets/images/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/code-push/assets/images/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/code-push/assets/images/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/code-push/assets/images/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/code-push/assets/images/icons/favicon-16x16.png">
  <link rel="manifest" href="/code-push/assets/images/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#294E80">
  <meta name="msapplication-TileImage" content="/code-push/assets/images/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <!-- JS -->    
	<!-- build:js  /assets/js/vendors.js  -->	
	<script src="/code-push/libraries/jquery/dist/jquery.min.js"></script>
	<script src="/code-push/libraries/bootstrap/dist/js/bootstrap.js"></script>
  <script src="/code-push/libraries/zeroclipboard/dist/ZeroClipboard.min.js"></script>
  <script src="/code-push/libraries/anchorific.js/min/anchorific.min.js"></script>
  <script src="/code-push/libraries/toc/dist/toc.min.js"></script>
  <script src="/code-push/libraries/highlightjs/highlight.pack.min.js"></script>
  <!-- endbuild -->   
  
  <!-- build:js /assets/js/all.min.js -->
  <script src="/code-push/assets/javascript/global.js"></script>
  <script src="/code-push/assets/javascript/home.js"></script>  
  <script src="/code-push/assets/javascript/docs.js"></script>
  <script src="/code-push/assets/javascript/faq.js"></script>
  <!-- endbuild -->
 
  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/code-push/atom.xml">

    
</head>
<body>
    <header role="banner">
	<nav class="navbar navbar-default navbar-fixed-top">
		 <div class="container-fluid">
        	<!--<img class="fork-me-ribbon pull-right" src="../assets/images/fork_me_ribbon.svg" />-->
		    <!-- Brand and toggle get grouped for better mobile display -->
		    <div class="navbar-header">
		      <button type="button" class="navbar-toggle pull-left collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>
		      <a class="navbar-brand" href="/code-push/index.html"><img class="navbar-logo" src="/code-push/assets/images/codepush_navbar_logo.svg" /></a>
		    </div>
		    <!-- Collect the nav links, forms, and other content for toggling -->
		    <div class="collapse navbar-collapse navbar_center" id="bs-example-navbar-collapse-1">
		      <ul class="nav navbar-nav">
				<li class=""><a href="/code-push/index.html#getting_started">Get Started</a></li>
				<li class="active"><a href="/code-push/docs/index.html">Documentation</a></li>
		        <li class=""><a href="/code-push/faq/index.html">FAQ</a></li>
				<li class=""><a href="/code-push/blog/index.html">Blog</a></li>
		      </ul>
		    </div><!-- /.navbar-collapse -->
		</div><!-- /.container-fluid -->
	</nav>				   		
</header>
<div class="top_navbar_spacer"></div>
	<div class="docs">
    <div id="content" class="container main_content">                       
        <div class="col-md-3 toc-container hidden-sm hidden-xs">
            <div class="row">
<div class='site-toc-container'>
  <h2 class="site-toc-title">Table of Contents</h2>
  <ul class="site-toc">
    
      
        
          
          
        
          
          
        
          
          
          <li>
            <a class="" href="/code-push/docs/getting-started.html">
                Getting Started
            </a>
            
          </li>
          
        
          
          
        
          
          
        
      
        
          
          
          <li>
            <a class="" href="/code-push/docs/cli.html">
                Management CLI
            </a>
            
          </li>
          
        
          
          
        
          
          
        
          
          
        
          
          
        
      
        
          
          
        
          
          
          <li>
            <a class="this-page" href="/code-push/docs/cordova.html">
                Cordova Client SDK
            </a>
            
                <div id="page-toc" class="page-toc"></div>
            
          </li>
          
        
          
          
        
          
          
        
          
          
        
      
        
          
          
        
          
          
        
          
          
        
          
          
          <li>
            <a class="" href="/code-push/docs/react-native.html">
                React Native Client SDK
            </a>
            
          </li>
          
        
          
          
        
      
          
  </ul>
</div>
</div>                          
        </div>      
        <div class="col-md-7 col-md-offset-1">
            <div class="row">
                <div class="xs-toc-container visible-sm visible-xs">        
                    <nav class='xs-toc'>
  <div class="toc-dropdown dropdown">
    <h2 class="site-toc-title">Table of Contents</h2>
    <a class="dropdown-toggle btn" data-toggle="dropdown" href="#">
      Select topic
      <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
          
            
              
                
                
              
                
                
              
                
                
                <li>
                  <a href=/code-push/docs/getting-started.html>Getting Started</a>
                </li>
                
              
                
                
              
                
                
              
            
              
                
                
                <li>
                  <a href=/code-push/docs/cli.html>Management CLI</a>
                </li>
                
              
                
                
              
                
                
              
                
                
              
                
                
              
            
              
                
                
              
                
                
                <li>
                  <a href=/code-push/docs/cordova.html>Cordova Client SDK</a>
                </li>
                
              
                
                
              
                
                
              
                
                
              
            
              
                
                
              
                
                
              
                
                
              
                
                
                <li>
                  <a href=/code-push/docs/react-native.html>React Native Client SDK</a>
                </li>
                
              
                
                
              
            
      
    </ul>
  </div>    
</nav>


                </div>            
            </div>
            <div class="row">  
                <header class="doc-header">
                    <h1 class="doc-title">Cordova Client SDK</h1>
                    <!--<ul class="nav" style="display:inline-block;"><li><a class="edit-page-link" style="padding-left:0" href="https://microsoft.github.io/code-push_docs/Cordova.md" target="_blank"><span class="glyphicon glyphicon-pencil"></span><i>&nbsp;</i>Edit on GitHub</a></li></ul>-->
                </header>  
                <article class="doc-content">               
                    <p>This plugin provides integration with the CodePush service, allowing you to easily update your Cordova application.</p>

<p>Access to the plugin is through the <code>window.codePush</code> object. The object is available after the <code>deviceready</code> event.</p>

<h2>Installation</h2>
<div class="highlight"><pre><code class="language-text" data-lang="text">cordova plugin add cordova-plugin-code-push
</code></pre></div>
<h2>Supported platforms</h2>

<ul>
<li>Android</li>
<li>iOS</li>
</ul>

<h2>How does it work?</h2>

<p>A Cordova application&rsquo;s assets (HTML, JavaScript, CSS files and other resources) are traditionally loaded from the application installation location on the target device. After you submit an update to the store, the user downloads the update, and those assets will be replaced with the new assets.</p>

<p>CodePush is here to simplify this process by allowing you to instantly update your application&rsquo;s assets without having to submit a new update to the store. We do this by packaging the application assets in a zip archive and sending it to the CodePush server. In the application, we install and persist the update. Then, since these are all web assets, the application will just reload from the updated package location. We store the update packages in the internal storage of the device.</p>

<p>For an easy way to get started, please see our <a href="/samples">sample applications</a> and our <a href="#getting-started">getting started guide</a>.</p>

<h2>Compiling sources &amp; contributing</h2>

<p>The JavaScript code in this plugin is compiled from TypeScript. Please see <a href="CONTRIBUTING.md">this page</a> for more details on contributing and how to build the project.</p>

<h2>Methods</h2>

<ul>
<li><strong><a href="#codepushcheckforupdate">checkForUpdate</a></strong>: Checks the server for update packages.</li>
<li><strong><a href="#codepushnotifyapplicationready">notifyApplicationReady</a></strong>: Notifies the plugin that the update operation succeeded.</li>
<li><strong><a href="#codepushgetcurrentpackage">getCurrentPackage</a></strong>: Gets information about the currently applied package.</li>
<li><strong><a href="#codepushsync">sync</a></strong>: Convenience function for installing updates in one call.</li>
</ul>

<h2>Objects</h2>

<ul>
<li><strong><a href="#localpackage">LocalPackage</a></strong>: Contains information about a locally installed package.</li>
<li><strong><a href="#remotepackage">RemotePackage</a></strong>: Contains information about an update package available for download.</li>
<li><strong><a href="#syncstatus">SyncStatus</a></strong>: Defines the possible intermediate and result statuses of the <a href="#codepushsync">sync</a> operation.</li>
<li><strong><a href="#installmode">InstallMode</a></strong>: Defines the available install modes for updates.</li>
</ul>

<h2>Getting started</h2>

<ul>
<li>Add the plugin to your application.</li>
<li>Create one deployment per target platform using the <a href="https://github.com/Microsoft/code-push/tree/master/cli">CodePush CLI</a></li>
<li>Add the deployment keys to your <code>config.xml</code>
<code>xml
&lt;platform name=&quot;android&quot;&gt;
    &lt;preference name=&quot;CodePushDeploymentKey&quot; value=&quot;YOUR-ANDROID-DEPLOYMENT-KEY&quot; /&gt;
&lt;/platform&gt;
&lt;platform name=&quot;ios&quot;&gt;
    &lt;preference name=&quot;CodePushDeploymentKey&quot; value=&quot;YOUR-IOS-DEPLOYMENT-KEY&quot; /&gt;
&lt;/platform&gt;
</code></li>
<li>Allow access to the CodePush server:

<ul>
<li>In <code>config.xml</code>, add 
<code>xml
&lt;access origin=&quot;https://codepush.azurewebsites.net/ &quot; /&gt;
</code></li>
<li>In your html pages where the plugin is used, add the server URL to your existing Content Security Policy (CSP) header:
<code>xml
&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src https://codepush.azurewebsites.net/ &#39;self&#39; ... &quot;&gt;
</code></li>
</ul></li>
<li>You are now ready to use the plugin in the application code. See the <a href="/samples">sample applications</a> for a examples and the methods description for more details.</li>
</ul>

<h2>Create an application update package</h2>

<p>You can create an update by simply zipping and deploying your platform&rsquo;s www folder. The <a href="https://github.com/Microsoft/code-push/tree/master/cli">CodePush CLI</a> has a <code>deploy</code> command for this.</p>

<ol>
<li>Prepare your application</li>
</ol>
<div class="highlight"><pre><code class="language-text" data-lang="text">  cordova prepare
</code></pre></div>
<p>We are not deploying binaries in updates, so <code>prepare</code> is enough for this step. The <code>cordova build</code> command works as well for this step, since it calls <code>cordova prepare</code> behind the scenes.</p>

<ol>
<li>Deploy update using the <a href="https://github.com/Microsoft/code-push/tree/master/cli">CodePush CLI</a></li>
</ol>

<ul>
<li>For Android:
<code>
code-push release &lt;appName&gt; path_to_your_app/platforms/android/assets/www &lt;appStoreVersion&gt; --deploymentName &lt;AndroidDeploymentName&gt;
</code></li>
<li>For iOS:
<code>
code-push release &lt;appName&gt; path_to_your_app/platforms/ios/www &lt;appStoreVersion&gt; --deploymentName &lt;iOSDeploymentName&gt;
</code></li>
</ul>

<p>The service should now return an update when calling <code>codePush.checkForUpdate</code>.</p>

<h2>LocalPackage</h2>

<p>Contains details about an update package that has been downloaded locally or already applied (currently installed package).</p>

<h3>Properties</h3>

<ul>
<li><strong>deploymentKey</strong>: Deployment key of the package. (String)</li>
<li><strong>description</strong>: Package description. (String)</li>
<li><strong>label</strong>: Package label. (String)</li>
<li><strong>appVersion</strong>: The native version of the application this package update is intended for. (String)</li>
<li><strong>isMandatory</strong>: Flag indicating if the update is mandatory. (Boolean)</li>
<li><strong>packageHash</strong>: The hash value of the package. (String)</li>
<li><strong>packageSize</strong>: The size of the package, in bytes. (Number)</li>
<li><strong>failedInstall</strong>: Boolean flag indicating if this update package was previously attempted and the update failed. (Boolean). If using the rollback feature, this field can protect against going into an infinite bad update/revert loop. For an example on how to use the rollbackTimeout parameter to protect against a bad update, see the <a href="#codepushnotifyapplicationready">notifyApplicationReady() documentation</a>.</li>
<li><strong>localPath</strong>: The current, local path of the package. (String)</li>
<li><strong>isFirstRun</strong>: Flag indicating if the current application run is the first one after the package was applied. (Boolean)</li>
</ul>

<h3>Methods</h3>

<ul>
<li><strong>install(installSuccess, installError, installOptions)</strong>: Installs this package to the application.
The install behavior is dependent on the provided <code>installOptions</code>. By default, the update package is silently installed and the application is reloaded with the new content on the next application start.
If the installOptions.rollbackTimeout parameter is provided, the application will wait for a <code>codePush.notifyApplicationReady()</code> for the given number of milliseconds.
If <code>codePush.notifyApplicationReady()</code> is called before the time period specified by <code>rollbackTimeout</code>, the install operation is considered a success.
Otherwise, the install operation will be marked as failed, and the application is reverted to its previous version.</li>
</ul>

<h3>InstallOptions</h3>

<p>Interface defining several options for customizing install operation behavior.</p>

<ul>
<li><strong>rollbackTimeout</strong>: Optional time interval, in milliseconds, to wait for a <a href="#codepushnotifyapplicationready">notifyApplicationReady()</a> call before marking the install as failed and reverting to the previous version. By default, the rollback functionality is disabled - the parameter defaults to 0. (number)</li>
<li><strong>installMode</strong>: Used to specity the <a href="#installmode">InstallMode</a> used for the install operation. This is optional and defaults to InstallMode.ON_NEXT_RESTART.</li>
</ul>

<p>#### Example
    &ldquo;`javascript
    var onError = function (error) {
        console.log(&quot;An error occurred. &rdquo; + error);
    };</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">var onInstallSuccess = function () {
    console.log(&quot;Install succeeded.&quot;);
};

var onPackageDownloaded = function (localPackage) {
    localPackage.install(onInstallSuccess, onError);
};

var onUpdateCheck = function (remotePackage) {
    if (!remotePackage) {
        console.log(&quot;The application is up to date.&quot;);
    } else {
        console.log(&quot;A CodePush update is available. Package hash: &quot; + remotePackage.packageHash);
        remotePackage.download(onPackageDownloaded, onError);
    }
};

window.codePush.checkForUpdate(onUpdateCheck, onError);
```
</code></pre></div>
<p>For an example on how to use the rollbackTimeout parameter to protect against a bad update, see the <a href="#codepushnotifyapplicationready">notifyApplicationReady() documentation</a>.</p>

<h2>RemotePackage</h2>

<p>Contains details about an update package that is available for download.</p>

<h3>Properties</h3>

<ul>
<li><strong>deploymentKey</strong>: Deployment key of the package. (String)</li>
<li><strong>description</strong>: Package description. (String)</li>
<li><strong>label</strong>: Package label. (String)</li>
<li><strong>appVersion</strong>: The native version of the application this package update is intended for. (String)</li>
<li><strong>isMandatory</strong>: Flag indicating if the update is mandatory. (Boolean)</li>
<li><strong>packageHash</strong>: The hash value of the package. (String)</li>
<li><strong>packageSize</strong>: The size of the package, in bytes. (Number)</li>
<li><strong>failedInstall</strong>: Boolean flag indicating if this update package was previously attempted and the update failed. (Boolean)</li>
<li><strong>downloadUrl</strong>: The URL at which the package is available for download. (String)</li>
</ul>

<h3>Methods</h3>

<ul>
<li><strong>download(downloadSuccess, downloadError, downloadProgress)</strong>: Downloads the package update from the CodePush service. The <code>downloadSuccess</code> callback is invoked with a <a href="#localpackage">LocalPackage</a> argument, representing the downloaded package.
The optional <code>downloadProgress</code> callback is invoked several times during the download progress with one <code>DownloadProgress</code> parameter.</li>
</ul>

<h3>DownloadProgress</h3>

<p>Defines the format of the DownloadProgress object, used to send periodical update notifications on the progress of the update download.</p>

<h4>Properties</h4>

<ul>
<li><strong>totalBytes</strong>: The size of the downloading update package, in bytes. (Number)</li>
<li><strong>receivedBytes</strong>: The number of bytes already downloaded. (Number)</li>
</ul>

<p>### Example
  &ldquo;`javascript
    var onError = function (error) {
            console.log(&quot;An error occurred. &rdquo; + error);
        };</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">    var onPackageDownloaded = function (localPackage) {
        console.log(&quot;Package downloaded at: &quot; + localPackage.localPath);
        // you can now update your application to the downloaded version by calling localPackage.install()
    };

    var onProgress = function (downloadProgress) {
        console.log(&quot;Downloading &quot; + downloadProgress.receivedBytes + &quot; of &quot; + downloadProgress.totalBytes + &quot; bytes.&quot;);
    };

    var onUpdateCheck = function (remotePackage) {
        if (!remotePackage) {
            console.log(&quot;The application is up to date.&quot;);
        } else {
            console.log(&quot;A CodePush update is available. Package hash: &quot; + remotePackage.packageHash);
            remotePackage.download(onPackageDownloaded, onError, onProgress);
        }
    };

    window.codePush.checkForUpdate(onUpdateCheck, onError);
</code></pre></div><div class="highlight"><pre><code class="language-text" data-lang="text">- __abortDownload(abortSuccess, abortError)__: Aborts the current download session, if any.

## SyncStatus
Defines the possible statuses of the [sync](#codepushsync) operation. There are two categories of statuses: intermediate and result (final). The intermediate statuses represent progress statuses of the sync operation, and are not final. The result statuses represent final statuses of the sync operation. Every sync operation ends with only one result status, but can have zero or more intermediate statuses.
### Properties
- __UP_TO_DATE__: Result status - the application is up to date. (number)
- __UPDATE_INSTALLED__: Result status - an update is available, it has been downloaded, unzipped and copied to the deployment folder. After the completion of the callback invoked with SyncStatus.UPDATE_INSTALLED, the application will be reloaded with the updated code and resources. (number)
- __UPDATE_IGNORED__: Result status - an optional update is available, but the user declined to install it. The update was not downloaded. (number)
- __ERROR__: Result status - an error happened during the sync operation. This might be an error while communicating with the server, downloading or unziping the update. The console logs should contain more information about what happened. No update has been applied in this case. (number)
- __CHECKING_FOR_UPDATE__: Intermediate status - the plugin is about to check for updates.
- __AWAITING_USER_ACTION__: Intermediate status - a user dialog is about to be displayed. This status will be reported only if user interaction is enabled.
- __DOWNLOADING_PACKAGE__: Intermediate status - the update package is about to be downloaded.
- __INSTALLING_UPDATE__: Intermediate status - the update package is about to be installed.

## codePush.checkForUpdate
Queries the CodePush server for updates.
```javascript
codePush.checkForUpdate(onUpdateCheck, onError, deploymentKey);
</code></pre></div>
<ul>
<li><strong>onUpdateCheck</strong> Callback invoked in case of a successful response from the server.
                     The callback takes one <code>RemotePackage</code> parameter. A non-null package is a valid update.
                     A null package means the application is up to date for the current native application version.</li>
<li><strong>onError</strong> Optional callback invoked in case of an error. The callback takes one error parameter, containing the details of the error.</li>
<li><strong>deploymentKey</strong> Optional deployment key that overrides the config.xml setting.</li>
</ul>

<h3>Example</h3>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var onError = function (error) {
    console.log(&quot;An error occurred. &quot; + error);
};

var onUpdateCheck = function (remotePackage) {
    if (!remotePackage) {
        console.log(&quot;The application is up to date.&quot;);
    } else {
        console.log(&quot;A CodePush update is available. Package hash: &quot; + remotePackage.packageHash);
    }
};

window.codePush.checkForUpdate(onUpdateCheck, onError);
</code></pre></div>
<h2>codePush.getCurrentPackage</h2>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">codePush.getCurrentPackage(onPackageSuccess, onError);
</code></pre></div>
<p>Get the currently installed package information. 
- <strong>onPackageSuccess</strong>: Callback invoked with the currently deployed package information. If the application did not install updates yet, <code>packageSuccess</code> will be called with a <code>null</code> argument.
- <strong>onError</strong>: Optional callback invoked in case of an error.</p>

<h3>Example</h3>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">var onError = function (error) {
    console.log(&quot;An error occurred. &quot; + error);
};

var onPackageSuccess = function (localPackage) {
    if (!localPackage) {
        console.log(&quot;The application has no CodePush updates installed (App Store Version).&quot;);
    } else {
        console.log(&quot;The currently installed CodePush update: &quot; + localPackage.packageHash);
    }
};

window.codePush.getCurrentPackage(onPackageSuccess, onError);
</code></pre></div>
<h2>codePush.notifyApplicationReady</h2>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">codePush.notifyApplicationReady(notifySucceeded, notifyFailed);
</code></pre></div>
<p>Notifies the plugin that the update operation succeeded.
Calling this function is required if a installOptions.rollbackTimeout parameter is passed to your <code>LocalPackage.install</code> call.
If automatic rollback was not used, calling this function is not required and will result in a noop.
- <strong>notifySucceeded</strong>: Optional callback invoked if the plugin was successfully notified.
- <strong>notifyFailed</strong>: Optional callback invoked in case of an error during notifying the plugin.</p>

<h3>Example</h3>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">// App version 1 (current version)

var onError = function (error) {
    console.log(&quot;An error occurred. &quot; + error);
};

var onInstallSuccess = function () {
    console.log(&quot;Installation succeeded.&quot;);
};

var onPackageDownloaded = function (localPackage) {
    // set the rollbackTimeout to 10s
    localPackage.install(onInstallSuccess, onError, { rollbackTimeout: 10000 });
};

var onUpdateCheck = function (remotePackage) {
    if (!remotePackage) {
        console.log(&quot;The application is up to date.&quot;);
    } else {
        // The hash of each previously reverted package is stored for later use. 
        // This way, we avoid going into an infinite bad update/revert loop.
        if (!remotePackage.failedInstall) {
            console.log(&quot;A CodePush update is available. Package hash: &quot; + remotePackage.packageHash);
            remotePackage.download(onPackageDownloaded, onError);
        } else {
            console.log(&quot;The available update was attempted before and failed.&quot;);
        }
    }
};

window.codePush.checkForUpdate(onUpdateCheck, onError);

//------------------------------------------------

// App version 2 (updated version)

var app = {
    onDeviceReady: function () {
        // If this call is not made in 10s after the updated version of the application is loaded,
        // the application will be reverted to the previous version
        window.codePush.notifyApplicationReady();
        // ...
    }
}
</code></pre></div>
<h2>codePush.sync</h2>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">codePush.sync(syncCallback, syncOptions, downloadProgress);
</code></pre></div>
<p>Convenience method for installing updates in one method call.
This method is provided for simplicity, and its behavior can be replicated by using window.codePush.checkForUpdate(), RemotePackage&rsquo;s download() and LocalPackage&rsquo;s install() methods.
The algorithm of this method is the following:
- Check for an update on the CodePush server.
  - If an update is available
    - If the update is mandatory and the alertMessage is set in options, the user will be informed that the application will be updated to the latest version. The update package will then be downloaded and applied. 
    - If the update is not mandatory and the confirmMessage is set in options, the user will be asked if they want to update to the latest version. If they decline, the syncCallback will be invoked with SyncStatus.UPDATE_IGNORED status.
    - Otherwise, the update package will be downloaded and applied with no user interaction.
- If no update is available on the server, the syncCallback will be invoked with the SyncStatus.UP_TO_DATE status.
- If an error occurs during checking for update, downloading or installing it, the syncCallback will be invoked with the SyncStatus.ERROR status.</p>

<ul>
<li><strong>syncCallback</strong>: Optional callback to be called with the status of the sync operation. The callback will be called multiple times. It will be called at least one time with an intermediate status, and only one time (the final call) with a result status. The possible statuses are defined by the SyncStatus enum.</li>
<li><strong>syncOptions</strong>: Optional SyncOptions parameter configuring the behavior of the sync operation.</li>
<li><strong>downloadProgress</strong>: Optional callback invoked during the download process. It is called several times with one DownloadProgress parameter.</li>
</ul>

<h3>SyncOptions</h3>

<p>Interface defining several options for customizing the <a href="#codepushsync">sync</a> operation behavior. Options span from disabling the user interaction or modifying it to enabling rollback in case of a bad update.</p>

<ul>
<li><strong>rollbackTimeout</strong>: Optional time interval, in milliseconds, to wait for a <a href="#codepushnotifyapplicationready">notifyApplicationReady()</a> call before marking the install as failed and reverting to the previous version. Sync calls <a href="#codepushnotifyapplicationready">notifyApplicationReady()</a> internally, so if you use sync() in your updated version of the application, there is no need to call <a href="#codepushnotifyapplicationready">notifyApplicationReady()</a> again. By default, the rollback functionality is disabled - the parameter defaults to 0. (number)</li>
<li><strong>installMode</strong>: Used to specity the <a href="#installmode">InstallMode</a> used for the install operation. This is optional and defaults to InstallMode.ON_NEXT_RESTART.</li>
<li><strong>ignoreFailedUpdates</strong>: Optional boolean flag. If set, updates available on the server for which and update was attempted and rolled back will be ignored. Defaults to true. (boolean)</li>
<li><strong>updatedialog</strong>: Option used to enable, disable or customize the user interaction during sync. If set to false, user interaction will be disabled. If set to true, the user will be alerted or asked to confirm new updates, based on whether the update is mandatory. To customize the user dialog, this option can be set to a custom UpdateDialogOptions instance.</li>
<li><strong>deploymentKey</strong>: Option used to override the config.xml deployment key when checking for updates.</li>
</ul>

<h3>UpdateDialogOptions</h3>

<p>Interface defining the configuration options for the alert or confirmation dialog.</p>

<ul>
<li><strong>mandatoryUpdateMessage</strong>:  If a mandatory update is available and this option is set, the message will be displayed to the user in an alert dialog before downloading and installing the update. The user will not be able to cancel the operation, since the update is mandatory. (string)</li>
<li><strong>optionalUpdateMessage</strong>: If an optional update is available and this option is set, the message will be displayed to the user in a confirmation dialog. If the user confirms the update, it will be downloaded and installed. Otherwise, the update update is not downloaded. (string)</li>
<li><strong>updateTitle</strong>: The title of the dialog box used for interacting with the user in case of a mandatory or optional update. This title will only be used if at least one of mandatoryUpdateMessage or optionalUpdateMessage options are set. (string)</li>
<li><strong>optionalInstallButtonLabel</strong>: The label of the confirmation button in case of an optional update. (string)</li>
<li><strong>optionalIgnoreButtonLabel</strong>: The label of the cancel button in case of an optional update. (string)</li>
<li><strong>mandatoryContinueButtonLabel</strong>: The label of the continue button in case of a mandatory update. (string)</li>
<li><strong>appendReleaseDescription</strong>: Flag indicating if the update description provided by the CodePush server should be displayed in the dialog box appended to the update message. Defaults to false. (boolean)</li>
<li><strong>descriptionPrefix</strong>: Optional prefix to add to the release description. (string)</li>
</ul>

<h3>Example</h3>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">
// Using default sync options: user interaction is disabled

 /* Invoke sync with the custom options, which enables user interaction.
           For customizing the sync behavior, see SyncOptions in the CodePush documentation. */
window.codePush.sync(
    function (syncStatus) {
        switch (syncStatus) {
            // Result (final) statuses
            case SyncStatus.UPDATE_INSTALLED:
                console.log(&quot;The update was installed successfully. For InstallMode.ON_NEXT_RESTART, the changes will be visible after application restart. &quot;);
                break;
            case SyncStatus.UP_TO_DATE:
                console.log(&quot;The application is up to date.&quot;);
                break;
            case SyncStatus.UPDATE_IGNORED:
                console.log(&quot;The user decided not to install the optional update.&quot;);
                break;
            case SyncStatus.ERROR:
                console.log(&quot;An error occured while checking for updates&quot;);
                break;

            // Intermediate (non final) statuses
            case SyncStatus.CHECKING_FOR_UPDATE:
                console.log(&quot;Checking for update.&quot;);
                break;
            case SyncStatus.AWAITING_USER_ACTION:
                console.log(&quot;Alerting user.&quot;);
                break;
            case SyncStatus.DOWNLOADING_PACKAGE:
                console.log(&quot;Downloading package.&quot;);
                break;
            case SyncStatus.INSTALLING_UPDATE:
                console.log(&quot;Installing update&quot;);
                break;
        }
    });

//------------------------------------------------

// Using custom sync options - user interaction is enabled, custom install mode and download progress callback

window.codePush.sync(
    function (syncStatus) {
        switch (syncStatus) {
            // Result (final) statuses
            case SyncStatus.UPDATE_INSTALLED:
                console.log(&quot;The update was installed successfully. For InstallMode.ON_NEXT_RESTART, the changes will be visible after application restart. &quot;);
                break;
            case SyncStatus.UP_TO_DATE:
                console.log(&quot;The application is up to date.&quot;);
                break;
            case SyncStatus.UPDATE_IGNORED:
                console.log(&quot;The user decided not to install the optional update.&quot;);
                break;
            case SyncStatus.ERROR:
                console.log(&quot;An error occured while checking for updates&quot;);
                break;

            // Intermediate (non final) statuses
            case SyncStatus.CHECKING_FOR_UPDATE:
                console.log(&quot;Checking for update.&quot;);
                break;
            case SyncStatus.AWAITING_USER_ACTION:
                console.log(&quot;Alerting user.&quot;);
                break;
            case SyncStatus.DOWNLOADING_PACKAGE:
                console.log(&quot;Downloading package.&quot;);
                break;
            case SyncStatus.INSTALLING_UPDATE:
                console.log(&quot;Installing update&quot;);
                break;
        }
    },
    {
        updateDialog: true, installMode: InstallMode.ON_NEXT_RESUME
    },
    function (downloadProgress) {
        console.log(&quot;Downloading &quot; + downloadProgress.receivedBytes + &quot; of &quot; + downloadProgress.totalBytes + &quot; bytes.&quot;);
    });

</code></pre></div>
<h2>InstallMode</h2>

<p>Defines the available install modes for update packages.</p>

<h3>Properties</h3>

<ul>
<li><strong>IMMEDIATE</strong>: The update will be applied to the running application immediately. The application will be reloaded with the new content immediately.</li>
<li><strong>ON_NEXT_RESTART</strong>: The update is downloaded but not installed immediately. The new content will be available the next time the application is started.</li>
<li><strong>ON_NEXT_RESUME</strong>: The udpate is downloaded but not installed immediately. The new content will be available the next time the application is resumed or restarted, whichever event happends first.</li>
</ul>
  
                </article>
            </div>  
        </div>           
    </div>
</div>
	<footer>
    <div class="footer-container">
        <div class="container" id="footer">
            <div class="row">
                <div class="col-sm-9">
                    <div class="row">
                        <div class="col-sm-4">
                            <h4>General</h4>
                            <ul class="nav">
                                <!--TODO: CHECK LINKS-->
                                <li><a href="https://github.com/Microsoft/code-push/blob/master/LICENSE.md" target="_blank">License</a></li>
                                <li><a href="https://www.visualstudio.com/en-us/privacy-policy-vs" target="_blank">Privacy</a></li>
                                <li><a href="https://msdn.microsoft.com/en-us/cc300389" target="_blank">Terms of Service</a></li>
                            </ul>
                        </div>
                        <div class="col-sm-4">
                            <h4>Community</h4>
                            <ul class="nav">
                                <li><a href="https://github.com/Microsoft/code-push/" target="_blank">GitHub Project</a></li>
                                <li><a href="https://stackoverflow.com/questions/tagged/codepush" target="_blank">Stack Overflow</a></li>
                                <li><a href="https://twitter.com/hashtag/codepush" target="_blank">#CodePush</a></li>
                            </ul>
                        </div>
                        <div class="col-sm-4">
                            <h4>Documentation</h4>
                            <ul class="nav">
                                <li><a href="https://github.com/Microsoft/code-push/blob/master/cli/README.md" target="_blank">CLI Docs</a></li>
                                <li><a href="https://github.com/Microsoft/cordova-plugin-code-push/blob/master/README.md" target="_blank">Cordova Plugin Docs</a></li>
                                <li><a href="https://github.com/Microsoft/react-native-code-push/blob/master/README.md" target="_blank">React Native Plugin Docs</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3">
                    <h3><i class="fa fa-comment"></i> Talk to us!</h3>
                    <p>If you have any feedback or suggestions on how we can make CodePush more awesome, please <a href=mailto:codepushfeed@microsoft.com>email us</a> or ping us in the <a href="https://discord.gg/0ZcbPKXt5bWxFdFu">#code-push</a> channel on Reactiflux (for React Native).</p>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid signature-container">
        <div class="container">
            <div class="row signature">          
                <p class="pull-left hidden-xs">Made with <span class="glyphicon glyphicon-heart"></span> in Redmond</p> 
                <div class="pull-right">
                    <p class="copyright pull-left">&copy;2012-2015 Microsoft
                    <img class="ms-logo-footer" src="/code-push/assets/images/Microsoft_logo.svg"/></p>
                </div>              
            </div>
        </div>        
    </div>
</footer>

	<script>
    
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-68566566-1', 'auto');
    
     // strip off trailing slashes
    var pathnameWithoutTrailingSlash = window.location.pathname.toLowerCase();
    var pathnameLength = pathnameWithoutTrailingSlash.length;
    
    if (pathnameLength > 1 && pathnameWithoutTrailingSlash.lastIndexOf("/") == pathnameLength - 1) {
        pathnameWithoutTrailingSlash = pathnameWithoutTrailingSlash.substring(0, pathnameLength - 1);
    }
    ga("send", "pageview", pathnameWithoutTrailingSlash);
    
    window.onhashchange = function () {
        ga("send", "pageview", window.location.pathname.toLowerCase() + window.location.hash);
    };    
    
</script>
</body>	
</html>